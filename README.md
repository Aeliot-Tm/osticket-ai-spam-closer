# AI Spam Closer Plugin for osTicket

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–ø–∞–º-—Ç–∏–∫–µ—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI (OpenAI GPT) –≤ —Ç–µ–º–µ, —Ç–µ–∫—Å—Ç–µ –∏ –≤–ª–æ–∂–µ–Ω–∏—è—Ö.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **AI-–∞–Ω–∞–ª–∏–∑ —Å–ø–∞–º–∞** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OpenAI GPT-4o/GPT-4o-mini
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –Ω–∞ —Å–ø–∞–º
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ø–∞–º–∞ —Å –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (confidence)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Vision API)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –≤–ª–æ–∂–µ–Ω–∏–π (PDF, DOC, DOCX, TXT, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- ‚úÖ Fallback –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ AI
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–ø–∞–º-—Ç–∏–∫–µ—Ç–æ–≤
- ‚úÖ –ö–Ω–æ–ø–∫–∞ —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤ –º–µ–Ω—é "More"
- ‚úÖ –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ —Å –ø—Ä–∏—á–∏–Ω–æ–π –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚úÖ –ë–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–ª–∞–≥–∏–Ω–∞ –≤ `include/plugins/`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Admin Panel ‚Üí Manage ‚Üí Plugins
3. –ù–∞–π–¥–∏—Ç–µ "AI Spam Closer" –∏ –Ω–∞–∂–º–∏—Ç–µ "Add New Instance"
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
5. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–ª–∞–≥–∏–Ω

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### OpenAI API Key
API –∫–ª—é—á –æ—Ç OpenAI. –ü–æ–ª—É—á–∏—Ç–µ –Ω–∞ https://platform.openai.com/api-keys

### OpenAI Model
–í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
- **GPT-4o** - —Å–∞–º–∞—è –º–æ—â–Ω–∞—è, –¥–æ—Ä–æ–≥–∞—è
- **GPT-4o Mini** - –±—ã—Å—Ç—Ä–∞—è –∏ –¥–æ—Å—Ç—É–ø–Ω–∞—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **GPT-4 Turbo** - –±–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞
- **GPT-3.5 Turbo** - —Å–∞–º–∞—è –¥–µ—à–µ–≤–∞—è

### API Timeout (seconds)
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenAI API.

### Spam Keywords (Fallback)
–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–∞ —Å–ª—É—á–∞–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ AI (comma –∏–ª–∏ semicolon separated):
```
viagra, casino, lottery, winner, click here, buy now, limited offer
```

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏:
- –ó–∞–ø—è—Ç–∞—è (,)
- –¢–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π (;)
- –†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–∏—Å–∫

### Close Reason Text
–¢–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –∑–∞–º–µ—Ç–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Ç–∏–∫–µ—Ç–∞ –∫–∞–∫ —Å–ø–∞–º.

### Auto-close on ticket creation
–í–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏.

### Enable Debug Logging
–í–∫–ª—é—á–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

### Max File Size (MB)
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏–∑ –≤–ª–æ–∂–µ–Ω–∏–π.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ "Auto-close on ticket creation" –ø–ª–∞–≥–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –Ω–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–ø–∞–º-–∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞.

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
–í –º–µ–Ω—é **"More"** (‚öôÔ∏è) –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–∏–∫–µ—Ç–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—É–Ω–∫—Ç **"üö´ Check for Spam and Close"**. –ù–∞–∂–º–∏—Ç–µ –µ–≥–æ –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–∫–µ—Ç–∞ –Ω–∞ —Å–ø–∞–º.

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
- Plugin ID: `osticket:ai-spam-closer`
- –ö–ª–∞—Å—Å—ã: `AISpamCloser*`
- Ajax endpoint: `/ai-spam-closer/analyze`
- CSS –∫–ª–∞—Å—Å—ã: `.ai-spam-closer-*`

### AI –ê–Ω–∞–ª–∏–∑
–ü–ª–∞–≥–∏–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OpenAI GPT –¥–ª—è:
1. **–ê–Ω–∞–ª–∏–∑–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Ç–∏–∫–µ—Ç–∞** - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ç–∏–∫–µ—Ç —Å–ø–∞–º–æ–º
2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - Vision API –¥–ª—è OCR
3. **–û—Ü–µ–Ω–∫–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏** - confidence score 0-100%
4. **–û–±—ä—è—Å–Ω–µ–Ω–∏—è —Ä–µ—à–µ–Ω–∏—è** - reasoning –∏ —Å–ø–∏—Å–æ–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —Å–ø–∞–º–∞

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Ñ–∞–π–ª–æ–≤
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (JPG, PNG, GIF, WebP)**: OpenAI Vision API
- **PDF**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `pdftotext`
- **DOC**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `antiword` –∏–ª–∏ `catdoc`
- **DOCX**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `unzip` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è XML
- **TXT**: –ø—Ä—è–º–æ–µ —á—Ç–µ–Ω–∏–µ

### Fallback —Ä–µ–∂–∏–º
–ï—Å–ª–∏ AI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞:
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ regex –∏ –ø—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ fallback

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `$ticket->logNote()` –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

## –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏

Pavel Bahdanau, Anatoly Melnikov

## –í–µ—Ä—Å–∏—è

1.0.0

